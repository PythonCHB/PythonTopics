

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Where to Put Tests? &mdash; Python Topics 1.0.0 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Where to put your custom code?" href="where_to_put_your_code.html" />
    <link rel="prev" title="Persistence and Serialization" href="persistance_serialization.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> Python Topics
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="weak_references.html">Python Memory Management and Weak References</a></li>
<li class="toctree-l1"><a class="reference internal" href="persistance_serialization.html">Persistence and Serialization</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Where to Put Tests?</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#tl-dr">TL; DR</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#test-system-recommendations">Test system recommendations</a></li>
<li class="toctree-l3"><a class="reference internal" href="#two-options">Two Options</a></li>
<li class="toctree-l3"><a class="reference internal" href="#self-contained">Self Contained</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sub-package">Sub-package</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="where_to_put_your_code.html">Where to put your custom code?</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Python Topics</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Where to Put Tests?</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/where_to_put_tests.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="where-to-put-tests">
<h1>Where to Put Tests?<a class="headerlink" href="#where-to-put-tests" title="Permalink to this headline">¶</a></h1>
<div class="section" id="tl-dr">
<h2>TL; DR<a class="headerlink" href="#tl-dr" title="Permalink to this headline">¶</a></h2>
<p>If your package and test code are small and self contained, put the tests in with the package.</p>
<p>If the tests are large or complex, or require reading/writing files, or significant sample data, put your tests outside the package.</p>
<div class="section" id="test-system-recommendations">
<h3>Test system recommendations<a class="headerlink" href="#test-system-recommendations" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">pytest</span></code> has a bit of discussion of the issue here:</p>
<p><a class="reference external" href="https://docs.pytest.org/en/stable/goodpractices.html">https://docs.pytest.org/en/stable/goodpractices.html</a></p>
<p>For <code class="docutils literal notranslate"><span class="pre">nose</span></code>, read <a class="reference external" href="https://nose.readthedocs.io/en/latest/finding_tests.html">https://nose.readthedocs.io/en/latest/finding_tests.html</a></p>
<p>and for <code class="docutils literal notranslate"><span class="pre">unittest</span></code> read <a class="reference external" href="https://docs.python.org/3/library/unittest.html#test-discovery">https://docs.python.org/3/library/unittest.html#test-discovery</a>.</p>
</div>
<div class="section" id="two-options">
<h3>Two Options<a class="headerlink" href="#two-options" title="Permalink to this headline">¶</a></h3>
<p>In Python packaging, there is no consensus on where you should put your test suite. This thread:</p>
<p><a class="reference external" href="https://mail.python.org/pipermail/distutils-sig/2015-October/027003.html">https://mail.python.org/pipermail/distutils-sig/2015-October/027003.html</a></p>
<p>makes that clear :-)</p>
<p>There are essentially two recommended approaches:</p>
<ol class="arabic">
<li><p>Put all your test code outside the package, and have it all designed to import from an installed base:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">my_package</span> <span class="kn">import</span> <span class="n">the_module_to_test</span>
</pre></div>
</div>
</li>
</ol>
<p>to do that, you need to install your package under development in “develop” mode:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">develop</span>
</pre></div>
</div>
<p>or:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">e</span> <span class="o">.</span>   <span class="c1"># install package using setup.py in editable mode</span>
</pre></div>
</div>
<p>That means that you do need a setup.py – though it can be very minimal. See:</p>
<p><a class="reference external" href="https://packaging.python.org/en/latest/">https://packaging.python.org/en/latest/</a></p>
<p>for recommendations.</p>
<p>In the this case, the directory with all the tests should not be a python package – this is, it should not have a <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code> file.</p>
<ol class="arabic" start="2">
<li><p>The other options is to put your test code in a sub-package inside your package. In this case, it should be inside your package, and <em>be</em> a python package itself (i.e. have an <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code>):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">my_package</span>
    <span class="fm">__init__</span><span class="o">.</span><span class="n">py</span>
    <span class="n">module_1</span><span class="o">.</span><span class="n">py</span>
    <span class="n">module_2</span><span class="o">.</span><span class="n">py</span>
    <span class="n">test</span>
        <span class="n">__init_</span><span class="o">.</span><span class="n">py</span>
        <span class="n">test_1</span><span class="o">.</span><span class="n">py</span>
        <span class="n">test_2</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="self-contained">
<h3>Self Contained<a class="headerlink" href="#self-contained" title="Permalink to this headline">¶</a></h3>
<p>The advantage of keeping test code self-contained is that you can have a large suite of tests with sample data and who knows what, and it won’t bloat and complicate the installed package (and test code can write to the test dirs, etc. Also, you can then run the test suite against an installed version that may not be exactly the same as the current live code.</p>
</div>
<div class="section" id="sub-package">
<h3>Sub-package<a class="headerlink" href="#sub-package" title="Permalink to this headline">¶</a></h3>
<p>The advantage of test being a sub-package is that your test code gets installed with the package, so users (including yourself, if you are deploying the code) can install the package, and run the test to make sure the install all went well. You can also have the tests use relative imports, so you can run it all without installing (though with develop mode I don’t think that is much of an advantage)</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="where_to_put_your_code.html" class="btn btn-neutral float-right" title="Where to put your custom code?" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="persistance_serialization.html" class="btn btn-neutral float-left" title="Persistence and Serialization" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2014, Christopher Barker

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>