

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Where to put your custom code? &mdash; Python Topics 1.0.0 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Where to Put Tests?" href="where_to_put_tests.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> Python Topics
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="weak_references.html">Python Memory Management and Weak References</a></li>
<li class="toctree-l1"><a class="reference internal" href="persistance_serialization.html">Persistence and Serialization</a></li>
<li class="toctree-l1"><a class="reference internal" href="where_to_put_tests.html">Where to Put Tests?</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Where to put your custom code?</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#a-package-just-for-you">A Package Just for You!</a></li>
<li class="toctree-l2"><a class="reference internal" href="#tl-dr">TL; DR</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="#options-for-handling-your-code-collection">Options for Handling Your Code Collection:</a></li>
<li class="toctree-l3"><a class="reference internal" href="#what-you-should-do-is-make-a-package">What you should do is make a “package”</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#why-don-t-people-tend-to-figure-this-out-for-themselves">Why Don’t People Tend to Figure This out for Themselves?</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#step-by-step">Step by Step:</a></li>
<li class="toctree-l3"><a class="reference internal" href="#putting-in-your-code">Putting in your code</a></li>
<li class="toctree-l3"><a class="reference internal" href="#notes">NOTES:</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Python Topics</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Where to put your custom code?</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/where_to_put_your_code.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="where-to-put-your-custom-code">
<h1>Where to put your custom code?<a class="headerlink" href="#where-to-put-your-custom-code" title="Permalink to this headline">¶</a></h1>
<div class="section" id="a-package-just-for-you">
<h2>A Package Just for You!<a class="headerlink" href="#a-package-just-for-you" title="Permalink to this headline">¶</a></h2>
<p>(You can find this page at: <a class="reference external" href="http://bit.ly/JustPackage">http://bit.ly/JustPackage</a>)</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This page is generated from a Sphinx document managed in this gitHub repo: <a class="reference external" href="https://github.com/PythonCHB/PythonTopics">https://github.com/PythonCHB/PythonTopics</a>. I welcome questions, comments, and, of course, Pull Requests.</p>
</div>
<p>A suggestion for how to manage your personal library of python functions you might use for scripting, data analysis, etc.</p>
</div>
<div class="section" id="tl-dr">
<h2>TL; DR<a class="headerlink" href="#tl-dr" title="Permalink to this headline">¶</a></h2>
<p>If you have a collection of your own code you want to access for various projects:</p>
<p>Make a “package” out of it so you can manage it in one place, and use it in other places.</p>
<p>You DO NOT NEED TO PUT IT ON PYPI !</p>
<div class="section" id="introduction">
<h3>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h3>
<p>Many scientists and engineers that do a little coding find they have a collection of little scripts and utilities that they want to be able to use and re-use for various projects.</p>
</div>
<div class="section" id="options-for-handling-your-code-collection">
<h3>Options for Handling Your Code Collection:<a class="headerlink" href="#options-for-handling-your-code-collection" title="Permalink to this headline">¶</a></h3>
<p><strong>(1)</strong> Keep your code in one place and copy and paste the functions you need into each new project.</p>
<p class="centered">
<strong><strong>DON’T DO THAT!</strong></strong></p><p class="centered">
<strong><strong>REALLY!</strong></strong></p><p>It is really NOT a good idea to simply copy and paste code around for use with each project. You will end up with multiple versions scattered all over the place …</p>
<p class="centered">
<strong><strong>You will regret that!</strong></strong></p><p><strong>(2)</strong> Put your code in a single directory and add it to the <code class="docutils literal notranslate"><span class="pre">PYTHONPATH</span></code> environment variable</p>
<p class="centered">
<strong><strong>DON’T DO THAT!</strong></strong></p><p class="centered">
<strong><strong>REALLY!</strong></strong></p><p><code class="docutils literal notranslate"><span class="pre">PYTHONPATH</span></code> is shared by all installs of Python. What with Python2, Python3, virtual environments, etc – it’s really not a good idea.</p>
<p>If you don’t believe me: <strong>Google It</strong></p>
</div>
<div class="section" id="what-you-should-do-is-make-a-package">
<h3>What you should do is make a “package”<a class="headerlink" href="#what-you-should-do-is-make-a-package" title="Permalink to this headline">¶</a></h3>
<p>The best way to do this with Python is to use the Python package mechanism.</p>
<p>A Python “package” is a collection of modules and scripts – we usually think of these as something carefully developed for a particular purpose and distributed to a wide audience for re-use – the packages you can install with pip.</p>
<p>Indeed that is the case, but the “collection of modules and scripts” part can be used for your own code that no one else is ever going to touch, and the overhead is small if you use it only this way.</p>
<div class="section" id="why-don-t-people-tend-to-figure-this-out-for-themselves">
<h4>Why Don’t People Tend to Figure This out for Themselves?<a class="headerlink" href="#why-don-t-people-tend-to-figure-this-out-for-themselves" title="Permalink to this headline">¶</a></h4>
<p>The packaging documentation is mostly about making a “proper” package for distribution to a wide audience.</p>
<p>So newbies tend to either:</p>
<ul class="simple">
<li><p>Think: “I don’t want/need to do all that”, and then move on and copy and past their code around like they have already been doing.</p></li>
</ul>
<p>or</p>
<ul class="simple">
<li><p>Go ahead and follow all the instructions, and end up putting their tiny little not-useful-to-anyone-else package up on PyPi.</p></li>
</ul>
<p>The challenge is that most of the documentation about python packaging is focused on creating a package of a library that you want to distribute to the community. In that case, it’s very important to have full and proper meta data, tests, documentation, etc. As a result, the packaging documentation makes the whole process seem complicated and cumbersome.</p>
<p class="rubric">Making a simple package just for your own use can be very simple, and very useful.</p>
</div>
</div>
<div class="section" id="step-by-step">
<h3>Step by Step:<a class="headerlink" href="#step-by-step" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li><p>Create a directory in your user (or home, or … ) dir for your code. Let’s call it “my_code”.</p></li>
<li><p>This is going to seem odd, but create another dir with the same name inside that – this is where the actual code goes. (it’s a convention to name the top directory the same thing as the “package” name, but you don’t have to follow that convention. But the inner name does matter – that is the name of your package, and how you will import it into Python.</p></li>
</ol>
<p>Be thoughtful about what you name your package: you want a easy to remember and fairly easy to type name, but also one that is not used already for any of the standard library or commonly used third party packages. Once you come up with a name, google “the_name python” just to make sure it’s not already in use.</p>
<ol class="arabic simple" start="3">
<li><p>In that dir, put in an empty, for now, file called <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code>.</p></li>
<li><p>In the outer dir, put in a file (we’ll fill it in later) called <code class="docutils literal notranslate"><span class="pre">setup.py</span></code>.</p></li>
</ol>
<p>So you should have:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">my_code</span>
    <span class="n">my_code</span>
        <span class="fm">__init__</span><span class="o">.</span><span class="n">py</span>
        <span class="n">some_code</span><span class="o">.</span><span class="n">py</span>
    <span class="n">setup</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>The inner my_code dir is now a python “package” – any directory with a <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code> file is a package. But how to use it?</p>
<p>The <code class="docutils literal notranslate"><span class="pre">setup.py</span></code> file is where you specify for python how this package is setup. You can do a lot in there, and if you ever want to share your code with anyone else, you should follow:</p>
<p><a class="reference external" href="https://packaging.python.org/tutorials/distributing-packages/">https://packaging.python.org/tutorials/distributing-packages/</a></p>
<p>But for now, we are going to make it as <em>simple</em> as possible:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">setuptools</span> <span class="kn">import</span> <span class="n">setup</span>

<span class="n">setup</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;my_code&#39;</span><span class="p">,</span>
      <span class="n">packages</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;my_code&#39;</span><span class="p">],</span>
      <span class="p">)</span>
</pre></div>
</div>
<p>That’s it – really! There is a lot you can do here to support multiple packages, scripts, etc, but this is enough to get you started.</p>
<p>Here: <a class="reference download internal" download="" href="_downloads/9cf5f2793655451b6b2af1e6ee61317d/make_my_package.py"><code class="xref download docutils literal notranslate"><span class="pre">make_my_package.py</span></code></a> is a little script that will build an empty package for you:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">make_my_package</span><span class="o">.</span><span class="n">py</span> <span class="n">your_package_name</span>
</pre></div>
</div>
<p>will do it for you.</p>
</div>
<div class="section" id="putting-in-your-code">
<h3>Putting in your code<a class="headerlink" href="#putting-in-your-code" title="Permalink to this headline">¶</a></h3>
<p>Now put some code in there!</p>
<p>Create a file for your code, and put it in the inner my_code dir:</p>
<p><code class="docutils literal notranslate"><span class="pre">some_code.py</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Just an example, but this could be a collection of utility functions, etc.</span>

<span class="sd">Here would be documentation of what&#39;s in this file</span>

<span class="sd">In this case, just one function to make sure it works.</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="k">def</span> <span class="nf">test_fun</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;yup -- this worked!!&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>OK – now you have a (useless) package with some code in it - how to use it?</p>
<p>To use this package, you need to “install” it into the python environment that you want to use. Some of us have a single python install – maybe Anaconda’s root environment, or the python.org python installer, or …</p>
<p>Some of us use virtualenv, or pipenv, or conda environments. In any case, get yourself into that environment at a command line and put yourself (<code class="docutils literal notranslate"><span class="pre">cd</span></code> in Terminal, DOS box, etc…)  in the outer my_code dir (where the setup.py  is), and type:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">e</span> <span class="o">.</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span></code> installs a package. <code class="docutils literal notranslate"><span class="pre">-e</span></code> means “do an editable install”, and the dot (<code class="docutils literal notranslate"><span class="pre">.</span></code>) tells pip to install the package in the current directory. <code class="docutils literal notranslate"><span class="pre">pip</span></code> will look for a <code class="docutils literal notranslate"><span class="pre">setup.py</span></code> file in the current working dir. An editable install is like install, but instead of copying the code into the python environment, it adds it to the Python search path (only that particular environment’s Python) so you can import it, but it will always be importing the current version of the files if you change things.</p>
<p>This means you can be actively maintaining your shared code, and other projects that use it will always get the latest version.</p>
<p>Now you can fire up Python (or iPython, or a Jupyter notebook, or write code in a script, or…) and do:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [2]: </span><span class="kn">from</span> <span class="nn">test_package</span> <span class="kn">import</span> <span class="n">test_code</span>

<span class="gp">In [3]: </span><span class="n">test_code</span><span class="o">.</span><span class="n">test_fun</span><span class="p">()</span>

<span class="go">yup -- this worked!!</span>
</pre></div>
</div>
<p>And you are good to go!</p>
</div>
<div class="section" id="notes">
<h3>NOTES:<a class="headerlink" href="#notes" title="Permalink to this headline">¶</a></h3>
<p>If you have only a little bit of code, you can do all this with a single module, rather than a package, and have an easier import. But I think most folks have enough stuff that it’s better to have multiple modules with related stuff in them.</p>
<p>If you have more than a few modules, it would probably make sense to keep them in separate packages, organized by functionality.</p>
<dl class="simple">
<dt>This is only the very simplest way to do it. What you really SHOULD do is be more formal about the process:</dt><dd><ul class="simple">
<li><p>Do some versioning of the package</p></li>
<li><p>Keep it in source code version control system (like git, etc)</p></li>
<li><p>Add tests of your code…</p></li>
</ul>
</dd>
</dl>
<p>and others. But this is enough to get you started, and you can extend it as you develop more software carpentry skills.</p>
<p>Look up “Software Carpentry” for many more ideas about how better to manage your Software for Science.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="where_to_put_tests.html" class="btn btn-neutral float-left" title="Where to Put Tests?" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2014, Christopher Barker

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>